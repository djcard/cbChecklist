"use strict";(self.webpackChunkcbChecklist=self.webpackChunkcbChecklist||[]).push([[2725,8760,2201,2376,2040,2188,4861,4565,2111],{8760:function(t,n,e){e.r(n),e.d(n,{updateSiteModelChecklist:function(){return i}});var i=function(t){return{type:"UPDATE_SITE_MODEL_CHECKLIST",payload:t}}},2201:function(t,n,e){e.r(n);var i=e(8760),c=e(3147),u=e(8026),o=e(184);n.default=function(t){var n=t.parentId,e=t.numOptions,a=t.checklistuuid;return(0,o.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){return function(t,n,e){u.default.dispatch((0,i.updateSiteModelChecklist)({newTarget:{parentId:t,numOptions:n,checklistuuid:e}})),u.default.dispatch((0,c.updateAppSettings)({modalModuleName:"components/cbChecklist/TargetForm",modalTitle:"New Target",showDefaultModal:1}))}(n,e,a)},children:"+"})}},2376:function(t,n,e){e.r(n);var i=e(4565),c=e(184);n.default=function(t){var n=t.checklistuuid,e=t.goal,u=t.target,o=t.result;return(0,c.jsx)("input",{type:"checkbox",checked:o,onChange:function(t){return function(t,n,e,c){(0,i.updateResult)(t,n,e,c?1:0)}(n,u,e,t.currentTarget.checked)}})}},2040:function(t,n,e){e.r(n);var i=e(4565),c=e(184);n.default=function(t){var n=t.target;return(0,c.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){(0,i.saveChecklistTarget)(Object.assign({},n,{active:0}))},children:"Delete"})}},2188:function(t,n,e){e.r(n);var i=e(184);n.default=function(t){var n=t.length,e=t.val,c=t.action,u=Array.apply(null,Array(n)).map((function(t,n){return n}));return(0,i.jsxs)("select",{value:e,onChange:function(t){c(t.target.value)},children:[(0,i.jsx)("option",{value:""}),u.map((function(t){return(0,i.jsx)("option",{value:t,children:t+1})}))]})}},4861:function(t,n,e){e.r(n);var i=e(8760),c=e(3147),u=(e(4565),e(8026)),o=e(184);n.default=function(t){var n=t.target;return(0,o.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){!function(t){u.default.dispatch((0,i.updateSiteModelChecklist)({newTarget:t})),u.default.dispatch((0,c.updateAppSettings)({showDefaultModal:1,modalModuleName:"components/cbChecklist/TargetForm",modalTitle:"Edit Target"}))}(n)},children:" Edit "})}},2725:function(t,n,e){e.r(n);var i=e(885),c=e(4942),u=e(2376),o=e(8026),a=e(2791),l=e(2201),r=e(4452),s=e(2188),d=e(4565),f=e(2040),h=e(4861),p=e(184);n.default=function t(n){var e,v=n.target,k=n.goals,g=n.results,C=n.depth,b=n.numOptions,m=(0,a.useState)(!1),j=(0,i.Z)(m,2),x=j[0],S=j[1],T=null!==(e=o.default.getState().siteModelChecklist)&&void 0!==e&&e.currentChecklistTargets?o.default.getState().siteModelChecklist.currentChecklistTargets:[],w=0,O=0,M=null===k||void 0===k?void 0:k.filter((function(t){var n;return"Done"===t.label&&(w=t.id),null===(n=t.label)||void 0===n?void 0:n.length})),y=null===T||void 0===T?void 0:T.filter((function(t){return t.parentid===(null===v||void 0===v?void 0:v.id)}));y.forEach((function(t){O+=g[null===t||void 0===t?void 0:t.id]&&g[null===t||void 0===t?void 0:t.id][w]?parseInt(g[null===t||void 0===t?void 0:t.id][w]):0}));var R=O/y.length,L=0===y.length&&1===(g[null===v||void 0===v?void 0:v.id]&&g[null===v||void 0===v?void 0:v.id][w]?parseInt(g[null===v||void 0===v?void 0:v.id][w]):0)||1===R?"green":R>.75?"yellow":"LightCoral",N=10*C,U=!!o.default.getState().siteModelChecklist.showAllChildren&&o.default.getState().siteModelChecklist.showAllChildren;return(0,a.useEffect)((function(){S(U)}),[U]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{onClick:function(){return S(!x)},style:{backgroundColor:L},children:y.length?x?"-":"+":null}),(0,p.jsx)("td",{style:{paddingLeft:N+"%"},children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-1",children:[(0,p.jsx)(l.default,{parentId:v.id,numOptions:y.length,checklistuuid:v.checklistuuid}),"    "]}),(0,p.jsx)("div",{className:"col-10",children:null===v||void 0===v?void 0:v.testpackage}),(0,p.jsx)("div",{className:"col-1"})]})}),(0,p.jsx)("td",{children:(0,p.jsx)(s.default,{length:b,val:v.displayorder,action:function(t){!function(t,n,e){"displayorder"===n&&(t.updateOrder=1),(0,d.saveChecklistTarget)(Object.assign({},t,(0,c.Z)({},n,e)))}(v,"displayorder",t)}})}),M.map((function(t){var n=g[null===v||void 0===v?void 0:v.id]&&g[null===v||void 0===v?void 0:v.id][null===t||void 0===t?void 0:t.id]?g[null===v||void 0===v?void 0:v.id][null===t||void 0===t?void 0:t.id]:0;return(0,p.jsx)("td",{children:(0,p.jsx)(u.default,{checklistuuid:v.checklistuuid,goal:t.id,target:v.id,result:n},t.id+v.testpackage)})})),(0,p.jsx)("td",{children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col",children:(0,p.jsx)(h.default,{target:v})}),(0,p.jsx)("div",{className:"col",children:(0,p.jsx)(f.default,{target:v})})]})})]}),y.length&&x?y.map((function(n){return(0,p.jsx)(t,{target:n,goals:k,results:g,depth:C+1,numOptions:y.length},n.checklistuuid+n.testpackage+(0,r.randNum)(1,1e3))})):null]})}},4565:function(t,n,e){e.r(n),e.d(n,{checkWindow:function(){return l},makeCheckListInactive:function(){return h},obtainChecklistDetails:function(){return g},obtainChecklists:function(){return p},obtainGoals:function(){return S},obtainResults:function(){return O},obtainTargets:function(){return m},saveChecklistGoal:function(){return E},saveChecklistTarget:function(){return d},updateCheckList:function(){return r},updateResult:function(){return L}});var i=e(2111),c=e(8026),u=e(8760),o=e(4452),a=0,l=function(){var t=setInterval((function(){var n;(null!==(n=window.SITEMODEL)&&void 0!==n&&n.exists()||3===a)&&(c.default.dispatch((0,u.updateSiteModelChecklist)({windowSetup:!0})),clearInterval(t)),a++}),3e3)},r=function(t){(0,i.doUpdateChecklist)(t,v,s)},s=function(t){console.dir(t)},d=function(t){console.dir(t),delete t.numOptions,(0,i.doSaveChecklistTarget)(t,j,f)},f=function(t){console.dir(t)},h=function(t){console.dir("Making inactive")},p=function(){(0,i.doObtainChecklists)(v,k)},v=function(t){c.default.dispatch((0,u.updateSiteModelChecklist)({allChecklists:(0,o.lowerCaseKeys)(t.data.data)}))},k=function(t){console.dir(t)},g=function(t){(0,i.doObtainChecklistDetails)(t,C,b)},C=function(t){c.default.dispatch((0,u.updateSiteModelChecklist)({currentChecklist:(0,o.lowerCaseKeys)(t.data.data)}))},b=function(t){console.dir(t)},m=function(t){(0,i.doObtainTargets)(t,j,x)},j=function(t){c.default.dispatch((0,u.updateSiteModelChecklist)({currentChecklistTargets:(0,o.lowerCaseKeys)(t.data.data)}))},x=function(t){console.dir(t)},S=function(t){(0,i.doObtainGoals)(t,T,w)},T=function(t){c.default.dispatch((0,u.updateSiteModelChecklist)({currentChecklistGoals:(0,o.lowerCaseKeys)(t.data.data)}))},w=function(t){console.dir(t)},O=function(t){(0,i.doObtainResults)(t,M,R)},M=function(t){c.default.dispatch((0,u.updateSiteModelChecklist)({currentChecklistResults:y((0,o.lowerCaseKeys)(t.data.data))}))},y=function(t){var n={};return t.forEach((function(t){n[t.targetid]=n.hasOwnProperty(t.targetid)?n[t.targetid]:{},n[t.targetid][t.goalid]=t.result})),n},R=function(t){console.dir(t)},L=function(t,n,e,c){(0,i.doUpdateResult)(t,n,e,c,(function(n){return N(t,n)}),U)},N=function(t,n){O(t)},U=function(t){console.dir(t)},E=function(t){(0,i.doSaveChecklistGoal)(t,T,I)},I=function(t){console.dir(t)}},2111:function(t,n,e){e.r(n),e.d(n,{doObtainChecklistDetails:function(){return a},doObtainChecklists:function(){return o},doObtainGoals:function(){return r},doObtainResults:function(){return s},doObtainTargets:function(){return l},doSaveChecklistGoal:function(){return p},doSaveChecklistTarget:function(){return f},doUpdateChecklist:function(){return h},doUpdateResult:function(){return d}});var i=e(4569),c=e.n(i),u=e(4452),o=function(t,n){c().get((0,u.apiURL)()+"/cbChecklist/").then((function(n){return t(n)})).catch((function(t){return n(t)}))},a=function(t,n,e){c().get((0,u.apiURL)()+"/cbChecklist/"+t).then((function(t){return n(t)})).catch((function(t){return e(t)}))},l=function(t,n,e){c().get((0,u.apiURL)()+"/cbChecklist/targets/"+t).then((function(t){return n(t)})).catch((function(t){return e(t)}))},r=function(t,n,e){c().get((0,u.apiURL)()+"/cbChecklist/goals/"+t).then((function(t){return n(t)})).catch((function(t){return e(t)}))},s=function(t,n,e){c().get((0,u.apiURL)()+"/cbChecklist/results/"+t).then((function(t){return n(t)})).catch((function(t){return e(t)}))},d=function(t,n,e,i,o,a){c().post((0,u.apiURL)()+"/cbChecklist/results/"+t,{goal:e,target:n,result:i}).then((function(t){return o(t)})).catch((function(t){return a(t)}))},f=function(t,n,e){c().post((0,u.apiURL)()+"/cbChecklist/targets",{item:t}).then((function(t){return n(t)})).catch((function(t){return e(t)}))},h=function(t,n,e){c().post((0,u.apiURL)()+"/cbChecklist/",{item:t}).then((function(t){return n(t)})).catch((function(t){return e(t)}))},p=function(t,n,e){c().post((0,u.apiURL)()+"/cbChecklist/goals",{item:t}).then((function(t){return n(t)})).catch((function(t){return e(t)}))}}}]);
//# sourceMappingURL=2725.d063b6fb.chunk.js.map