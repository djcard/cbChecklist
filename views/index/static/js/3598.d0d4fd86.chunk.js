"use strict";(self.webpackChunkcbChecklist=self.webpackChunkcbChecklist||[]).push([[3598,8760,4673,4565,2111],{8760:function(t,n,e){e.r(n),e.d(n,{updateSiteModelChecklist:function(){return i}});var i=function(t){return{type:"UPDATE_SITE_MODEL_CHECKLIST",payload:t}}},4673:function(t,n,e){e.r(n);var i=e(8026),c=e(8760),r=e(184);n.default=function(t){var n=t.checklistuuid,e=t.parentid,u=t.displayOrder;return(0,r.jsx)("button",{onClick:function(){return function(t,n,e){var r,u,o=null!==(r=i.default.getState().siteModelChecklist)&&void 0!==r&&r.currentChecklistTargets?null===(u=i.default.getState().siteModelChecklist)||void 0===u?void 0:u.currentChecklistTargets:[];o.push({checklistuuid:t,displayOrder:e,parentid:n,isDirty:!0}),i.default.dispatch((0,c.updateSiteModelChecklist)({currentChecklistTargets:o}))}(n,e,u)},children:" Add Child "})}},3598:function(t,n,e){e.r(n);var i=e(885),c=e(2791),r=e(4565),u=e(4673),o=e(8026),a=e(184);n.default=function t(n){var e,s,l=n.item,d=n.idx,f=n.indent,h=void 0===f?0:f;l.displayorder=l.hasOwnProperty("displayorder")&&isNaN(l.displayorder)?l.displayorder:d+1;var k=(0,c.useState)(l),p=(0,i.Z)(k,2),C=p[0],g=p[1],b=C.hasOwnProperty("isDirty")&&C.isDirty?"yellow":"none",v=null!==C&&void 0!==C&&C.isDirty?(0,a.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){g(Object.assign({},C,{isDirty:!1})),(0,r.saveChecklistTarget)(C)},children:"Save"}):null,y=(null!==(e=o.default.getState().siteModelChecklist)&&void 0!==e&&e.currentChecklistTargets?null===(s=o.default.getState().siteModelChecklist)||void 0===s?void 0:s.currentChecklistTargets:[]).filter((function(t){return t.parentid===l.id}));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{style:{backgroundColor:b},children:[(0,a.jsx)("td",{style:{textAlign:["left","center","right"][h]},children:d+1}),(0,a.jsx)("td",{children:(0,a.jsx)("input",{type:"text",value:C.testpackage,onChange:function(t){return g(Object.assign({},C,{testpackage:t.currentTarget.value,isDirty:!0}))},style:{paddingLeft:10*h+"%",width:"100%"}})}),(0,a.jsx)("td",{children:v}),(0,a.jsx)("td",{children:(0,a.jsx)(u.default,{checklistuuid:l.checklistuuid,parentid:l.id,displayOrder:y.length+1})})]}),y.map((function(n,e){return(0,a.jsx)(t,{item:n,idx:e,indent:h+1},n.parentid+n.diplayOrder)}))]})}},4565:function(t,n,e){e.r(n),e.d(n,{checkWindow:function(){return a},makeCheckListInactive:function(){return h},obtainChecklistDetails:function(){return g},obtainChecklists:function(){return k},obtainGoals:function(){return T},obtainResults:function(){return R},obtainTargets:function(){return y},saveChecklistGoal:function(){return E},saveChecklistTarget:function(){return d},updateCheckList:function(){return s},updateResult:function(){return j}});var i=e(2111),c=e(8026),r=e(8760),u=e(4452),o=0,a=function(){var t=setInterval((function(){var n;(null!==(n=window.SITEMODEL)&&void 0!==n&&n.exists()||3===o)&&(c.default.dispatch((0,r.updateSiteModelChecklist)({windowSetup:!0})),clearInterval(t)),o++}),3e3)},s=function(t){(0,i.doUpdateChecklist)(t,p,l)},l=function(t){console.dir(t)},d=function(t){console.dir(t),delete t.numOptions,(0,i.doSaveChecklistTarget)(t,O,f)},f=function(t){console.dir(t)},h=function(t){console.dir("Making inactive")},k=function(){(0,i.doObtainChecklists)(p,C)},p=function(t){c.default.dispatch((0,r.updateSiteModelChecklist)({allChecklists:(0,u.lowerCaseKeys)(t.data.data)}))},C=function(t){console.dir(t)},g=function(t){(0,i.doObtainChecklistDetails)(t,b,v)},b=function(t){c.default.dispatch((0,r.updateSiteModelChecklist)({currentChecklist:(0,u.lowerCaseKeys)(t.data.data)}))},v=function(t){console.dir(t)},y=function(t){(0,i.doObtainTargets)(t,O,S)},O=function(t){c.default.dispatch((0,r.updateSiteModelChecklist)({currentChecklistTargets:(0,u.lowerCaseKeys)(t.data.data)}))},S=function(t){console.dir(t)},T=function(t){(0,i.doObtainGoals)(t,w,x)},w=function(t){c.default.dispatch((0,r.updateSiteModelChecklist)({currentChecklistGoals:(0,u.lowerCaseKeys)(t.data.data)}))},x=function(t){console.dir(t)},R=function(t){(0,i.doObtainResults)(t,L,U)},L=function(t){c.default.dispatch((0,r.updateSiteModelChecklist)({currentChecklistResults:M((0,u.lowerCaseKeys)(t.data.data))}))},M=function(t){var n={};return t.forEach((function(t){n[t.targetid]=n.hasOwnProperty(t.targetid)?n[t.targetid]:{},n[t.targetid][t.goalid]=t.result})),n},U=function(t){console.dir(t)},j=function(t,n,e,c){(0,i.doUpdateResult)(t,n,e,c,(function(n){return D(t,n)}),m)},D=function(t,n){R(t)},m=function(t){console.dir(t)},E=function(t){(0,i.doSaveChecklistGoal)(t,w,G)},G=function(t){console.dir(t)}},2111:function(t,n,e){e.r(n),e.d(n,{doObtainChecklistDetails:function(){return o},doObtainChecklists:function(){return u},doObtainGoals:function(){return s},doObtainResults:function(){return l},doObtainTargets:function(){return a},doSaveChecklistGoal:function(){return k},doSaveChecklistTarget:function(){return f},doUpdateChecklist:function(){return h},doUpdateResult:function(){return d}});var i=e(4569),c=e.n(i),r=e(4452),u=function(t,n){c().get((0,r.apiURL)()+"/cbChecklist/").then((function(n){return t(n)})).catch((function(t){return n(t)}))},o=function(t,n,e){c().get((0,r.apiURL)()+"/cbChecklist/"+t).then((function(t){return n(t)})).catch((function(t){return e(t)}))},a=function(t,n,e){c().get((0,r.apiURL)()+"/cbChecklist/targets/"+t).then((function(t){return n(t)})).catch((function(t){return e(t)}))},s=function(t,n,e){c().get((0,r.apiURL)()+"/cbChecklist/goals/"+t).then((function(t){return n(t)})).catch((function(t){return e(t)}))},l=function(t,n,e){c().get((0,r.apiURL)()+"/cbChecklist/results/"+t).then((function(t){return n(t)})).catch((function(t){return e(t)}))},d=function(t,n,e,i,u,o){c().post((0,r.apiURL)()+"/cbChecklist/results/"+t,{goal:e,target:n,result:i}).then((function(t){return u(t)})).catch((function(t){return o(t)}))},f=function(t,n,e){c().post((0,r.apiURL)()+"/cbChecklist/targets",{item:t}).then((function(t){return n(t)})).catch((function(t){return e(t)}))},h=function(t,n,e){c().post((0,r.apiURL)()+"/cbChecklist/",{item:t}).then((function(t){return n(t)})).catch((function(t){return e(t)}))},k=function(t,n,e){c().post((0,r.apiURL)()+"/cbChecklist/goals",{item:t}).then((function(t){return n(t)})).catch((function(t){return e(t)}))}}}]);
//# sourceMappingURL=3598.d0d4fd86.chunk.js.map