"use strict";(self.webpackChunkcbChecklist=self.webpackChunkcbChecklist||[]).push([[663,8760,2776,4565,2111],{8760:function(t,e,n){n.r(e),n.d(e,{updateSiteModelChecklist:function(){return i}});var i=function(t){return{type:"UPDATE_SITE_MODEL_CHECKLIST",payload:t}}},2776:function(t,e,n){n.r(e);var i=n(885),c=n(2791),r=n(4565),o=n(184);e.default=function(t){var e=t.item,n=t.idx;e.displayorder=isNaN(e.displayorder)?n+1:e.displayorder;var u=(0,c.useState)(e),a=(0,i.Z)(u,2),s=a[0],l=a[1],d=s.hasOwnProperty("isDirty")&&s.isDirty?"yellow":"none",f=null!==s&&void 0!==s&&s.isDirty?(0,o.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){l(Object.assign({},s,{isDirty:!1})),(0,r.saveChecklistGoal)(s)},children:"Save"}):null;return(0,o.jsxs)("tr",{style:{backgroundColor:d},children:[(0,o.jsx)("td",{children:n+1}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{type:"text",value:s.label,onChange:function(t){return l(Object.assign({},s,{label:t.currentTarget.value,isDirty:!0}))}})}),(0,o.jsxs)("td",{children:[(0,o.jsx)("input",{type:"checkbox",checked:s.active,onChange:function(t){return l(Object.assign({},s,{active:t.currentTarget.checked,isDirty:!0}))}})," "]}),(0,o.jsxs)("td",{children:[f," "]})]})}},663:function(t,e,n){n.r(e);var i=n(8687),c=n(8026),r=n(2776),o=(n(4565),n(184));e.default=(0,i.$j)((function(t){return{siteModelChecklist:t.siteModelChecklist,dataStore:t.dataStore,tabStore:t.tabStore}}),{})((function(){var t,e=c.default.getState().siteModelChecklist.currentChecklistGoals?c.default.getState().siteModelChecklist.currentChecklistGoals:[],n=null===(t=c.default.getState().siteModelChecklist)||void 0===t?void 0:t.currentChecklist;return e.push({checklistuuid:n.id,active:1}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{children:"Goals"}),(0,o.jsxs)("table",{className:"table table-bordered",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{}),(0,o.jsx)("th",{children:"Goal"}),(0,o.jsx)("th",{children:"Active"}),(0,o.jsx)("th",{})]})}),(0,o.jsx)("tbody",{children:e.map((function(t,e){return(0,o.jsx)(r.default,{item:t,idx:e})}))})]})]})}))},4565:function(t,e,n){n.r(e),n.d(e,{checkWindow:function(){return a},makeCheckListInactive:function(){return h},obtainChecklistDetails:function(){return b},obtainChecklists:function(){return k},obtainGoals:function(){return j},obtainResults:function(){return w},obtainTargets:function(){return x},saveChecklistGoal:function(){return m},saveChecklistTarget:function(){return d},updateCheckList:function(){return s},updateResult:function(){return T}});var i=n(2111),c=n(8026),r=n(8760),o=n(4452),u=0,a=function(){var t=setInterval((function(){var e;(null!==(e=window.SITEMODEL)&&void 0!==e&&e.exists()||3===u)&&(c.default.dispatch((0,r.updateSiteModelChecklist)({windowSetup:!0})),clearInterval(t)),u++}),3e3)},s=function(t){(0,i.doUpdateChecklist)(t,C,l)},l=function(t){console.dir(t)},d=function(t){(0,i.doSaveChecklistTarget)(t,y,f)},f=function(t){console.dir(t)},h=function(t){console.dir("Making inactive")},k=function(){(0,i.doObtainChecklists)(C,p)},C=function(t){c.default.dispatch((0,r.updateSiteModelChecklist)({allChecklists:(0,o.lowerCaseKeys)(t.data.data)}))},p=function(t){console.dir(t)},b=function(t){(0,i.doObtainChecklistDetails)(t,g,v)},g=function(t){c.default.dispatch((0,r.updateSiteModelChecklist)({currentChecklist:(0,o.lowerCaseKeys)(t.data.data)}))},v=function(t){console.dir(t)},x=function(t){(0,i.doObtainTargets)(t,y,S)},y=function(t){console.dir("Processing target return"),c.default.dispatch((0,r.updateSiteModelChecklist)({currentChecklistTargets:(0,o.lowerCaseKeys)(t.data.data)}))},S=function(t){console.dir(t)},j=function(t){(0,i.doObtainGoals)(t,O,R)},O=function(t){c.default.dispatch((0,r.updateSiteModelChecklist)({currentChecklistGoals:(0,o.lowerCaseKeys)(t.data.data)}))},R=function(t){console.dir(t)},w=function(t){(0,i.doObtainResults)(t,M,U)},M=function(t){c.default.dispatch((0,r.updateSiteModelChecklist)({currentChecklistResults:L((0,o.lowerCaseKeys)(t.data.data))}))},L=function(t){var e={};return t.forEach((function(t){e[t.testpackage]=e.hasOwnProperty(t.testpackage)?e[t.testpackage]:{},e[t.testpackage][t.goaluuid]=t.result})),e},U=function(t){console.dir(t)},T=function(t,e,n,c){(0,i.doUpdateResult)(t,e,n,c,(function(e){return D(t,e)}),G)},D=function(t,e){w(t)},G=function(t){console.dir(t)},m=function(t){(0,i.doSaveChecklistGoal)(t,O,E)},E=function(t){console.dir(t)}},2111:function(t,e,n){n.r(e),n.d(e,{doObtainChecklistDetails:function(){return u},doObtainChecklists:function(){return o},doObtainGoals:function(){return s},doObtainResults:function(){return l},doObtainTargets:function(){return a},doSaveChecklistGoal:function(){return k},doSaveChecklistTarget:function(){return f},doUpdateChecklist:function(){return h},doUpdateResult:function(){return d}});var i=n(4569),c=n.n(i),r=n(4452),o=function(t,e){c().get((0,r.apiURL)()+"/cbChecklist/").then((function(e){return t(e)})).catch((function(t){return e(t)}))},u=function(t,e,n){c().get((0,r.apiURL)()+"/cbChecklist/"+t).then((function(t){return e(t)})).catch((function(t){return n(t)}))},a=function(t,e,n){c().get((0,r.apiURL)()+"/cbChecklist/targets/"+t).then((function(t){return e(t)})).catch((function(t){return n(t)}))},s=function(t,e,n){c().get((0,r.apiURL)()+"/cbChecklist/goals/"+t).then((function(t){return e(t)})).catch((function(t){return n(t)}))},l=function(t,e,n){c().get((0,r.apiURL)()+"/cbChecklist/results/"+t).then((function(t){return e(t)})).catch((function(t){return n(t)}))},d=function(t,e,n,i,o,u){c().post((0,r.apiURL)()+"/cbChecklist/results/"+t,{goal:n,target:e,result:i}).then((function(t){return o(t)})).catch((function(t){return u(t)}))},f=function(t,e,n){c().post((0,r.apiURL)()+"/cbChecklist/targets",{item:t}).then((function(t){return e(t)})).catch((function(t){return n(t)}))},h=function(t,e,n){c().post((0,r.apiURL)()+"/cbChecklist/",{item:t}).then((function(t){return e(t)})).catch((function(t){return n(t)}))},k=function(t,e,n){c().post((0,r.apiURL)()+"/cbChecklist/goals",{item:t}).then((function(t){return e(t)})).catch((function(t){return n(t)}))}}}]);
//# sourceMappingURL=663.627f5676.chunk.js.map