"use strict";(self.webpackChunkcbChecklist=self.webpackChunkcbChecklist||[]).push([[91,8760,2201,2376,2040,2188,4861,3690,5896,2725,2688,4565,2111],{8760:function(t,e,n){n.r(e),n.d(e,{updateSiteModelChecklist:function(){return i}});var i=function(t){return{type:"UPDATE_SITE_MODEL_CHECKLIST",payload:t}}},2201:function(t,e,n){n.r(e);var i=n(8760),l=n(3147),a=n(8026),c=n(184);e.default=function(t){var e=t.parentId,n=t.numOptions,o=t.checklistuuid;return(0,c.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){return function(t,e,n){a.default.dispatch((0,i.updateSiteModelChecklist)({newTarget:{parentId:t,numOptions:e,checklistuuid:n}})),a.default.dispatch((0,l.updateAppSettings)({modalModuleName:"components/cbChecklist/TargetForm",modalTitle:"New Target",showDefaultModal:1}))}(e,n,o)},children:"+"})}},2376:function(t,e,n){n.r(e);var i=n(4565),l=n(184);e.default=function(t){var e=t.checklistuuid,n=t.goal,a=t.target,c=t.result;return(0,l.jsx)("input",{type:"checkbox",checked:c,onChange:function(t){return function(t,e,n,l){(0,i.updateResult)(t,e,n,l?1:0)}(e,a,n,t.currentTarget.checked)}})}},2040:function(t,e,n){n.r(e);var i=n(4565),l=n(184);e.default=function(t){var e=t.target;return(0,l.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){(0,i.saveChecklistTarget)(Object.assign({},e,{active:0}))},children:"Delete"})}},2188:function(t,e,n){n.r(e);var i=n(184);e.default=function(t){var e=t.length,n=t.val,l=t.action,a=Array.apply(null,Array(e)).map((function(t,e){return e}));return(0,i.jsxs)("select",{value:n,onChange:function(t){l(t.target.value)},children:[(0,i.jsx)("option",{value:""}),a.map((function(t){return(0,i.jsx)("option",{value:t,children:t+1})}))]})}},4861:function(t,e,n){n.r(e);var i=n(8760),l=n(3147),a=(n(4565),n(8026)),c=n(184);e.default=function(t){var e=t.target;return(0,c.jsx)("button",{className:"btn btn-sm btn-info",onClick:function(){!function(t){a.default.dispatch((0,i.updateSiteModelChecklist)({newTarget:t})),a.default.dispatch((0,l.updateAppSettings)({showDefaultModal:1,modalModuleName:"components/cbChecklist/TargetForm",modalTitle:"Edit Target"}))}(e)},children:" Edit "})}},91:function(t,e,n){n.r(e);var i=n(8026),l=n(2725),a=n(8687),c=n(5896),o=n(3147),s=(n(4452),n(3690)),u=n(184);e.default=(0,a.$j)((function(t){return{siteModelChecklist:t.siteModelChecklist}}),{})((function(){var t,e,n,a,r,d=null===(t=i.default.getState().siteModelChecklist)||void 0===t?void 0:t.currentChecklist,h=null!==(e=i.default.getState().siteModelChecklist)&&void 0!==e&&e.currentChecklistTargets?null===(n=i.default.getState().siteModelChecklist)||void 0===n?void 0:n.currentChecklistTargets:[],f=null!==(a=i.default.getState().siteModelChecklist)&&void 0!==a&&a.currentChecklistGoals?i.default.getState().siteModelChecklist.currentChecklistGoals:[],p=null!==(r=i.default.getState().siteModelChecklist)&&void 0!==r&&r.currentChecklistResults?i.default.getState().siteModelChecklist.currentChecklistResults:[],v=null===h||void 0===h?void 0:h.filter((function(t){return 0===t.parentid}));return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-9",children:(0,u.jsx)("h2",{children:null===d||void 0===d?void 0:d.name})}),(0,u.jsx)("div",{className:"col-3",children:(0,u.jsx)(c.default,{})})]}),(0,u.jsxs)("table",{className:"table table-striped table-bordered",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{}),(0,u.jsx)("th",{children:"Target"}),(0,u.jsx)("th",{children:"Display"}),f.filter((function(t){var e;return null===(e=t.label)||void 0===e?void 0:e.length})).map((function(t){return(0,u.jsx)(s.default,{goal:t})})),(0,u.jsx)("th",{children:(0,u.jsx)("button",{className:"btn btn-sm",onClick:function(){i.default.dispatch((0,o.updateAppSettings)({showDefaultModal:1,modalModuleName:"components/cbChecklist/GoalForm",modalTitle:"New Goal"}))},title:"Add Goal",children:" + "})}),(0,u.jsx)("th",{})]})}),(0,u.jsxs)("tbody",{children:[v.map((function(t){return(0,u.jsx)(l.default,{target:t,goals:f,results:p,depth:0,numOptions:v.length+1},t.checklistuuid+t.testpackage)})),(0,u.jsx)(l.default,{target:{checklistuuid:d.id,parentid:0},goals:f,results:p,depth:0,numOptions:v.length+1},"NewTargetRow")]})]})]})}))},3690:function(t,e,n){n.r(e);var i=n(8760),l=n(3147),a=n(4565),c=n(8026),o=n(4452),s=n(184);e.default=function(t){var e=t.goal;return(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-9",children:e.label}),(0,s.jsxs)("div",{className:"col-2",children:[(0,s.jsx)("span",{className:"badge text-bg-info",onClick:function(){!function(t){c.default.dispatch((0,i.updateSiteModelChecklist)({editGoal:t})),c.default.dispatch((0,l.updateAppSettings)({showDefaultModal:1,modalModuleName:"components/cbChecklist/GoalForm",modalTitle:"New Goal"}))}(e)},children:"E"}),(0,s.jsx)("span",{className:"badge text-bg-danger",onClick:function(){(0,a.saveChecklistGoal)(Object.assign({},e,{active:0}))},children:"D"})]})]})},"label"+e.id+(0,o.randNum)(1,1e4))}},5896:function(t,e,n){n.r(e);var i=n(2688),l=n(4565),a=n(8026),c=n(184);e.default=function(t){var e=t.classes?t.classes:"btn btn-info";return(0,c.jsx)("button",{onClick:function(){return function(){var t,e=null===(t=a.default.getState().siteModelChecklist)||void 0===t?void 0:t.currentChecklist.id;(0,l.obtainTargets)(e),(0,l.obtainGoals)(e),(0,l.obtainResults)(e)}()},className:e,children:(0,c.jsx)(i.default,{})})}},2725:function(t,e,n){n.r(e);var i=n(885),l=n(4942),a=n(2376),c=n(8026),o=n(2791),s=n(2201),u=n(4452),r=n(2188),d=n(4565),h=n(2040),f=n(4861),p=n(184);e.default=function t(e){var n,v=e.target,g=e.goals,k=e.results,C=e.depth,b=e.numOptions,m=(0,o.useState)(!1),x=(0,i.Z)(m,2),j=x[0],w=x[1],M=null!==(n=c.default.getState().siteModelChecklist)&&void 0!==n&&n.currentChecklistTargets?c.default.getState().siteModelChecklist.currentChecklistTargets:[],S=0,N=0,T=null===g||void 0===g?void 0:g.filter((function(t){var e;return"Done"===t.label&&(S=t.id),null===(e=t.label)||void 0===e?void 0:e.length})),O=null===M||void 0===M?void 0:M.filter((function(t){return t.parentid===(null===v||void 0===v?void 0:v.id)}));O.forEach((function(t){N+=k[null===t||void 0===t?void 0:t.id]&&k[null===t||void 0===t?void 0:t.id][S]?parseInt(k[null===t||void 0===t?void 0:t.id][S]):0}));var R=N/O.length,y=0===O.length&&1===(k[null===v||void 0===v?void 0:v.id]&&k[null===v||void 0===v?void 0:v.id][S]?parseInt(k[null===v||void 0===v?void 0:v.id][S]):0)||1===R?"green":R>.75?"yellow":"LightCoral",L=10*C,G=!!c.default.getState().siteModelChecklist.showAllChildren&&c.default.getState().siteModelChecklist.showAllChildren;return(0,o.useEffect)((function(){w(G)}),[G]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{onClick:function(){return w(!j)},style:{backgroundColor:y},children:O.length?j?"-":"+":null}),(0,p.jsx)("td",{style:{paddingLeft:L+"%"},children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsxs)("div",{className:"col-1",children:[(0,p.jsx)(s.default,{parentId:v.id,numOptions:O.length,checklistuuid:v.checklistuuid}),"    "]}),(0,p.jsx)("div",{className:"col-10",children:null===v||void 0===v?void 0:v.testpackage}),(0,p.jsx)("div",{className:"col-1"})]})}),(0,p.jsx)("td",{children:(0,p.jsx)(r.default,{length:b,val:v.displayorder,action:function(t){!function(t,e,n){"displayorder"===e&&(t.updateOrder=1),(0,d.saveChecklistTarget)(Object.assign({},t,(0,l.Z)({},e,n)))}(v,"displayorder",t)}})}),T.map((function(t){var e=k[null===v||void 0===v?void 0:v.id]&&k[null===v||void 0===v?void 0:v.id][null===t||void 0===t?void 0:t.id]?k[null===v||void 0===v?void 0:v.id][null===t||void 0===t?void 0:t.id]:0;return(0,p.jsx)("td",{children:(0,p.jsx)(a.default,{checklistuuid:v.checklistuuid,goal:t.id,target:v.id,result:e},t.id+v.testpackage)})})),(0,p.jsx)("td",{children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col",children:(0,p.jsx)(f.default,{target:v})}),(0,p.jsx)("div",{className:"col",children:(0,p.jsx)(h.default,{target:v})})]})})]}),O.length&&j?O.map((function(e){return(0,p.jsx)(t,{target:e,goals:g,results:k,depth:C+1,numOptions:O.length},e.checklistuuid+e.testpackage+(0,u.randNum)(1,1e3))})):null]})}},2688:function(t,e,n){n.r(e);n(2791);var i=n(184);e.default=function(t){var e=t.left?t.left:0,n=t.top?t.top:0,l=t.size?t.size:16,a=t.color?t.color:"currentColor";return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:l,fill:a,style:{transform:"translate("+e+"px, "+n+"px)"},className:"bi bi-arrow-repeat",viewBox:"0 0 16 16",children:[(0,i.jsx)("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"})]})}},4565:function(t,e,n){n.r(e),n.d(e,{checkWindow:function(){return s},makeCheckListInactive:function(){return f},obtainChecklistDetails:function(){return k},obtainChecklists:function(){return p},obtainGoals:function(){return w},obtainResults:function(){return N},obtainTargets:function(){return m},saveChecklistGoal:function(){return A},saveChecklistTarget:function(){return d},updateCheckList:function(){return u},updateResult:function(){return y}});var i=n(2111),l=n(8026),a=n(8760),c=n(4452),o=0,s=function(){var t=setInterval((function(){var e;(null!==(e=window.SITEMODEL)&&void 0!==e&&e.exists()||3===o)&&(l.default.dispatch((0,a.updateSiteModelChecklist)({windowSetup:!0})),clearInterval(t)),o++}),3e3)},u=function(t){(0,i.doUpdateChecklist)(t,v,r)},r=function(t){console.dir(t)},d=function(t){console.dir(t),delete t.numOptions,(0,i.doSaveChecklistTarget)(t,x,h)},h=function(t){console.dir(t)},f=function(t){console.dir("Making inactive")},p=function(){(0,i.doObtainChecklists)(v,g)},v=function(t){l.default.dispatch((0,a.updateSiteModelChecklist)({allChecklists:(0,c.lowerCaseKeys)(t.data.data)}))},g=function(t){console.dir(t)},k=function(t){(0,i.doObtainChecklistDetails)(t,C,b)},C=function(t){l.default.dispatch((0,a.updateSiteModelChecklist)({currentChecklist:(0,c.lowerCaseKeys)(t.data.data)}))},b=function(t){console.dir(t)},m=function(t){(0,i.doObtainTargets)(t,x,j)},x=function(t){l.default.dispatch((0,a.updateSiteModelChecklist)({currentChecklistTargets:(0,c.lowerCaseKeys)(t.data.data)}))},j=function(t){console.dir(t)},w=function(t){(0,i.doObtainGoals)(t,M,S)},M=function(t){l.default.dispatch((0,a.updateSiteModelChecklist)({currentChecklistGoals:(0,c.lowerCaseKeys)(t.data.data)}))},S=function(t){console.dir(t)},N=function(t){(0,i.doObtainResults)(t,T,R)},T=function(t){l.default.dispatch((0,a.updateSiteModelChecklist)({currentChecklistResults:O((0,c.lowerCaseKeys)(t.data.data))}))},O=function(t){var e={};return t.forEach((function(t){e[t.targetid]=e.hasOwnProperty(t.targetid)?e[t.targetid]:{},e[t.targetid][t.goalid]=t.result})),e},R=function(t){console.dir(t)},y=function(t,e,n,l){(0,i.doUpdateResult)(t,e,n,l,(function(e){return L(t,e)}),G)},L=function(t,e){N(t)},G=function(t){console.dir(t)},A=function(t){(0,i.doSaveChecklistGoal)(t,M,D)},D=function(t){console.dir(t)}},2111:function(t,e,n){n.r(e),n.d(e,{doObtainChecklistDetails:function(){return o},doObtainChecklists:function(){return c},doObtainGoals:function(){return u},doObtainResults:function(){return r},doObtainTargets:function(){return s},doSaveChecklistGoal:function(){return p},doSaveChecklistTarget:function(){return h},doUpdateChecklist:function(){return f},doUpdateResult:function(){return d}});var i=n(4569),l=n.n(i),a=n(4452),c=function(t,e){l().get((0,a.apiURL)()+"/cbChecklist/").then((function(e){return t(e)})).catch((function(t){return e(t)}))},o=function(t,e,n){l().get((0,a.apiURL)()+"/cbChecklist/"+t).then((function(t){return e(t)})).catch((function(t){return n(t)}))},s=function(t,e,n){l().get((0,a.apiURL)()+"/cbChecklist/targets/"+t).then((function(t){return e(t)})).catch((function(t){return n(t)}))},u=function(t,e,n){l().get((0,a.apiURL)()+"/cbChecklist/goals/"+t).then((function(t){return e(t)})).catch((function(t){return n(t)}))},r=function(t,e,n){l().get((0,a.apiURL)()+"/cbChecklist/results/"+t).then((function(t){return e(t)})).catch((function(t){return n(t)}))},d=function(t,e,n,i,c,o){l().post((0,a.apiURL)()+"/cbChecklist/results/"+t,{goal:n,target:e,result:i}).then((function(t){return c(t)})).catch((function(t){return o(t)}))},h=function(t,e,n){l().post((0,a.apiURL)()+"/cbChecklist/targets",{item:t}).then((function(t){return e(t)})).catch((function(t){return n(t)}))},f=function(t,e,n){l().post((0,a.apiURL)()+"/cbChecklist/",{item:t}).then((function(t){return e(t)})).catch((function(t){return n(t)}))},p=function(t,e,n){l().post((0,a.apiURL)()+"/cbChecklist/goals",{item:t}).then((function(t){return e(t)})).catch((function(t){return n(t)}))}}}]);
//# sourceMappingURL=91.0e5c0376.chunk.js.map